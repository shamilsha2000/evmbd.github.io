<html>
<body id="bdy" >
<div oncontextmenu="return false" style="background-color:yellow;width:600px;display:grid;place-items:center">

  <div id="controlPanel" class="controlPanel"  style="display:flex;flex-direction:row;position:relative;width:410px;height:80px; background-color:black;margin:5px 0px 0px 0px; border-bottom:4px solid white; border-radius:8px">
     <input  id="action2" class=""  type="button" style="height:30px;top:0px;right:0px;position:absolute"  ontouchend="touchended()" onclick="chooseLang()" />		
	 <div style="background-color:black; height:100%;width:50%;display:grid;place-items:center;">
			
		<div id="options"  style="display:flex;flex-direction:column;height:100%;color:white">		
			<div  style="width:100%;margin-top:5px">
				<input id=x"  class="opt"  type="radio" checked name="elect" value="1"  onclick="failElection()" />
				<label id="label1x" for="x"></label>
			</div>
			<div style="width:100%;margin-top:5px">
				<input id="y"  class="opt" type="radio"  name="elect" value="2" onclick="stateMachine(3)" />
				<label id="label1y" for="y"></label>
			</div>

		</div>
		<div id="progress" style="display:none;height:100%;color:white;place-items:center">
		      Vote rigging in progress
		</div>
	 </div>
	 <div style="background-color:black;height:100%;width:50%">
	    <div   style="display:grid;place-items:center;height:100%;background-color:black" >
			<input  id="action" class="styled btnDim1"  type="button" style="height:30px"  ontouchend="touchended()" onclick="action()" />		
		</div>
	 </div>
  </div>
  <br>
 	
  <div id="slealingPanel" style="background-color:black;color:white;height:520px;width:410px;display:none;padding-top:5px;border:solid 2px white;">
	   <div style="display:flex;flex-direction:column;font-size:20">
	        <div style="width:100%;display:flex;flex-direction:row;border:2px solid white">
				<p id="whoami" style="width:50%;padding:0px"></p>
				<div id="form_comparison" style="width:50%" class="field radio_field">
					<input type="radio" class="thief" id="form_comparison_0" style="margin-right:10px" name="form[comparison1]" value="1"  onclick="thiefType(1)" />
					<label id="thieftype1" for="form_comparison_0"></label>
					<input type="radio" class="thief" id="form_comparison_1" style="margin-right:10px" name="form[comparison1]" value="2" onclick="thiefType(2)" />
					<label id="thieftype2" for="form_comparison_1"></label>
					<input type="radio" class="thief" id="form_comparison_1" style="margin-right:10px" name="form[comparison1]" value="2" onclick="thiefType(3)" />
					<label id="thieftype3" for="form_comparison_1"></label>

				</div>

			</div>
			<div style="margin-top:20px;display:grid;place-items:center;">
				<div style="width:50%;display:grid;place-items:center;">
					<button id="btngohome1" onclick="goHome()" >Not a thief</button>
				</div> 
			</div>
			
			<div style="width:100%">
				<div id="thief1" style="display:none" >
					<p style="padding:0px;margin:0px 0px 10px 0px"></p>
					<div style="display:flex;flex-direction:row;width:100%;margin-left:20px">
						<div id="form_comparison" class="field radio_field" style="background-color:black; height:120px;width:50%" >
							<input type="radio" class="stealCode" id="form_comparison_0" name="form[comparison]" value="1" onclick="stealmethod2(1)" />
							<label for="form_comparison_0" id="code1">197175100</label>
							<input type="radio" class="stealCode" id="form_comparison_1" name="form[comparison]" value="2" onclick="stealmethod2(2)" />
							<label for="form_comparison_1" id="code2" >197175300</label>
							<input type="radio" class="stealCode" id="form_comparison_1" name="form[comparison]" value="2" onclick="stealmethod2(3)" />
							<label for="form_comparison_1" id="code3">197175500</label>
							<input type="radio" class="stealCode" id="form_comparison_1" name="form[comparison]" value="2" onclick="stealmethod2(4)" />
							<label for="form_comparison_1" id="code4" >197175600</label>
							<input type="radio" class="stealCode" id="form_comparison_1" name="form[comparison]" value="2" onclick="stealmethod2(5)" />
							<label for="form_comparison_1" id="code5" >197175999</label>
	
						</div>
						<div style="margin-top:20px;display:flex;flex-direction:column">
							<div id="btnStart2" style="width:100%;margin-top:20px;"> 
								<button  id="startstealing"  onclick="startVoting()">Start Voting</button>
							</div>
							<div style="width:100%;margin-top:25px">
								<button id="btngohome2" onclick="goHome()" >Cancel</button>
							</div> 

						</div>

					</div>
					<div>
						<p id="th1Rule">
						  Select the code number from the list. Last three digit of the code number determine
						  by at least how many votes awamileague will win. give this code number to polling officer.
						  You need a polling officer as your partner of crime. Without cooperating from polling officer
						  you can not steal. Polling offer must be your man and who will not tell the secret to other people.
						  otherwise you and election commissioner will be in trouble.			  
						</p>
					</div>

	  
				</div>
				<div id="thief2" style="display:none;flex-direction:column" >   
				    <p id="th2Rule">Hold down the CONFIRM button for at least 15 seconds but not more than 25 seconds, 
					  After releasing the CONFIRM button, press CANCEL button, each time you press CANCEL
					  button Awaimileague will be win by at least by 100 vote. As an Example, If you press
					  CANCEL button 5 times, Awaimileague will be win by 500 votes. You need to press the 
					  CANCEL button within 10 seconds after you release CONFIRM button.
				    </p>
				    <div style="margin-top:20px;display:flex;flex-direction:row">
						<div style="width:50%"> 
							<button id="btnStart3"  onclick="startVoting()"></button>
						</div>
						<div style="width:50%;">
							<button id="btngohome3" onclick="goHome()" >Go back</button>
						</div> 

					</div>
				</div>
				<div id="thief3" style="display:none" >    
				    <p id="th3Rule">Sorry, I have no idea how I can help for free. Please contact me for consultation.
				       As you are ready to sell the country to win the election, we have to do it secretly.
					   Choose another option.
				    </p>
				    <div style="margin-top:20px;display:flex;flex-direction:row">
						<div style="width:50%"> 
							<button id="btnStart4" style="display:none" onclick="startVoting()">Start Voting</button>
						</div>
						<div style="width:50%;">
							<button id="btngohome4" onclick="goHome()" >Go back</button>
						</div> 

					</div>
				</div>
			</div>
	   </div>

  </div>
  <div id="motherPanel" style="background-color:blue;height:520px;width:410px;padding-top:5px;border:solid 2px white;">
	<div id="evmPanel" class="flex-container1" style="margin:20px 0px 0px 20px;">
		<div class="fleft" id="voteConfirmationPanel" style="display:none;color:black;background-color:white" >
		
		   <div style="display:grid;place-items:center;font-size:24;background-color:white;color:black">
		       
		       <!-- <div style="margin-bottom:20px" id="towhom"></div> -->
		       <div ><img id="symbolvoted" style="width:100%" src="bnp.png" /></div>
			   <div id="voted"></div>
		   </div>
		</div>
		<div class="fleft" id="blankLeftPanel" style="display:none;color:black;background-color:#e5e4e2" >
		
		</div>
		
		<div class="fleft" id="infoPanel" style="display:none;color:while" >
		   <div style="height:100%;background-color:gray">
		    Hi, my name is EVM, I am just an innocent machine. I just follow the instruction
			given by my master (Software Engineer). I never disobey my master. 
			If there is anything wrong, it is not me, my master told me to do so.
			Please do not blame me.
			<p>			
				Select what kind of Election you want from the top panel.
			</p>
		   </div>
		</div>
		   
		<div class="fleft" id="evmLeftCandidatePanel">
			<div class="flex-container4 candName">
			  <div class="flex-container6" id="A1" >
			    <div class="markaA" id="A11"></div>
				<div class="markaC" id="A12"></div>
				<div class="markaB" id="A13"> <div class="imgdiv"> <img  class="imgg"  /> </div> </div>
			  </div>
			  <div class="flex-container6" id="A2">
			    <div class="markaA" id="A21"></div>
				<div class="markaC" id="A22"> </div>
				<div class="markaB" id="A23"><div class="imgdiv"> <img class="imgg" /></div></div>
			  </div>
			  <div class="flex-container6" id="A3">
			    <div class="markaA"></div>
				<div class="markaC"> </div>
				<div class="markaB"><div class="imgdiv"> <img class="imgg"  /></div></div>
	
			  </div>
			  <div class="flex-container6" >
			    <div class="markaA"></div>
				<div class="markaC"> </div>
				<div class="markaB"><div class="imgdiv"> <img class="imgg" /></div></div>
				
			  </div>
			  <div class="flex-container6" >
			    <div class="markaA"></div>
				<div class="markaC"> </div>
				<div class="markaB"><div class="imgdiv"> <img class="imgg" /></div></div>
			  </div>
			  <div class="flex-container6" >
			    <div class="markaA"></div>
				<div class="markaC"> </div>
				<div class="markaB"><div class="imgdiv"> <img class="imgg" /></div></div>
			  </div>			  
			  <div class="flex-container6" >
			    <div class="markaA"></div>
				<div class="markaC"> </div>
				<div class="markaB"><div class="imgdiv"> <img class="imgg" /></div></div>
			  </div>	
			  <div class="flex-container6" >
			    <div class="markaA"></div>
				<div class="markaC"> </div>
				<div class="markaB"><div class="imgdiv"> <img class="imgg" /></div></div>
			  </div>
<!--			  
			  <div class="flex-container6" >
			    <div class="markaA">Local Leader </div>
				<div class="markaC"> </div>
				<div class="markaB"><div class="imgdiv"> <img class="imgg" src="lili.jpeg" /></div></div>
			  </div>	
			  <div class="flex-container6" >
			    <div class="markaA">Local Leader </div>
				<div class="markaC"> </div>
				<div class="markaB"><div class="imgdiv"> <img class="imgg" src="lili.jpeg" /></div></div>
			  </div>	
-->			  
			  
			</div>
		</div>
		
		<div class="fright" id="evmRightPanel">
		
			<div class="flex-container4">
			  <div class="markax"> 
				<input type="button" onclick="vote(cadi[0].Id)" class="btnn btnWhite"></input> 
			  </div>
			  <div class="markax"> 
			     <input type="button" onclick="vote(cadi[1].Id)" class="btnn btnWhite"></input> 
			  </div>
			  <div class="markax"> <input type="button" onclick="vote(cadi[2].Id)" class="btnn btnWhite"></input> </div>
			  <div class="markax"> <input type="button" onclick="vote(cadi[3].Id)" class="btnn btnWhite"></input> </div>
			  <div class="markax"> <input type="button" onclick="vote(5)" class="btnn btnWhite"></input> </div>
			  <div class="markax"> <input type="button" onclick="vote(6)" class="btnn btnWhite"></input> </div>
			  <div class="markax"> <input type="button" onclick="vote(7)" class="btnn btnWhite"></input> </div>
			  <div class="markax"> <input type="button" onclick="vote(8)" class="btnn btnWhite"></input> </div>
			  <!--<div class="markax"> <div onclick="vote(9)" class="btnn"></div> </div>
			  <div class="markax"> <div onclick="vote(10)" class="btnn"></div> </div>
			  -->
			</div>
		</div>

	</div>
	<div id="confirmButtonPanel" class="flex-containerx" style="margin:5px 0px 0px 20px;">
			<div class="fleft5">
				<div class="fleft3" style="background-color:black">
					<input id="z"  class="btnGreen btnDim3"  type="button"  name="elect" value="CONFIRM"  onclick="confirmCandidate()" onmouseup="onup()" onmousedown="ondown()" />
				</div>
			</div>
		
			<div class="fright5">
			    <div class="fleft3">
					<input id="z1"  class="styled btnDim3" type="button"  name="elect" value="CANCEL"  onclick="cancel()" />
				</div>
			</div>
	</div>
	
  </div>
  

</div>

</body>

<script>

   timestart = null;
   timeend = null;
   diff = 0;
   
   function chooseLang()
   {
		if (languageSelection === 0)
			languageSelection = 1;
		else
			languageSelection = 0;	
		
		updateLabel();

        console.log("Language elected to " +  languageSelection + " cur state " + electionState);
        //stateMachine(electionState);			
   }
   function failElection()
   {
		stealingCode = 0;
		stateMachine(2);
   }
   function unselectGroup(grpIdentifier)
   {
		var elements = document.getElementsByClassName(grpIdentifier);
		if (!elements)
		    return;

		for (i = 0; i < elements.length; i++)
		{
			elements[i].checked = false;
		}
  
   }
   const clickEvent = new MouseEvent("click", {
		view: window,
		bubbles: true,
		cancelable: false,
   });
   function touchended()
   {
     console.log("Touch ended");
	 var elem = document.getElementById("bdy");
	 elem.dispatchEvent(clickEvent);
	 document.getElementById("action").classList.remove("hasactive");
	 var hasclass = document.getElementById("action").classList;
	 console.log(hasclass);
	// document.getElementById("action").classList.remove("styled");
	// document.getElementById("action").classList.add("styled");
	 
	 setTimeout(alttt, 100);
	  
   }
   
   function alttt()
   {
		var elem = document.getElementById("bdy");
		elem.focus();	
		console.log("Focus changed");
   }
   
   function action()
   {
		var elem = document.getElementById("bdy");
		elem.focus();
		
        console.log("current state = " + electionState);
		if (electionState === 2)
		{
		    console.log("moving to state " + 4);
			stateMachine(4);
		}
		else if (electionState === 4)
		{	
			console.log("moving to state " + 5);
			stateMachine(5);
		}
		else if (electionState === 6)
		{	
			console.log("moving to state " + 7);
			stateMachine(7);
		}
		else if (electionState == 5 || electionState === 7)
		{	
			console.log("moving to state " + 1);
		    stealingCode = 0;
			stateMachine(1);
		}
   }
   function testt()
   {
		console.log("got it");
   }
   function setThiefTypeSelectionToNone()
   {
		document.getElementById('form_comparison_0').checked = false;
		document.getElementById('form_comparison_1').checked = false;
   }
   function  stealmethod2(opt)
   { 
		document.getElementById('btnStart2').style.visibility = "visible";
		
		if (opt == 1)
		{
			stealingCode =	197175100;
		}
		else if (opt == 2)
			stealingCode =	197175300;
		else if (opt == 3)
			stealingCode =	197175500;
		else if (opt == 4)
			stealingCode =	197175700;
		else if (opt == 5)
			stealingCode =	197175999; 
   }  
   
   function thiefType(theifId)
   {
		document.getElementById("btngohome1").style.display = "none";
		stealingCode = 0;
       if (theifId === 1)
	   {
	       console.log("New thief");
		   unselectGroup("stealCode");
		   
	       document.getElementById("thief1").style.display = "block";
		   document.getElementById("thief2").style.display = "none";
		   document.getElementById("thief3").style.display = "none";
		   document.getElementById("btnStart2").style.visibility = "hidden";
		   
		   stealingCode = -1;
		   console.log("Thief 1");
	   }
	   else if (theifId === 2)
	   {
			console.log("Experienced thief");
			document.getElementById("thief1").style.display = "none";
			document.getElementById("thief2").style.display = "block";
			document.getElementById("thief3").style.display = "none";
			//document.getElementById("btnStart").style.display = "inline-block";
			stealingCode = 9999999;
			//console.log("Thief 2");
	   }
	   else if (theifId === 3)
	   {
		    console.log("Robber");
	        document.getElementById("thief1").style.display = "none";
		    document.getElementById("thief2").style.display = "none";
		    document.getElementById("thief3").style.display = "block";
		    document.getElementById("startstealing").style.visibility = "hidden";
		    //console.log("Thief 3");
		    stealingCode = -1;
	   }
   }
   
   function startVoting()
   {
      
      document.getElementById('slealingPanel').style.display = 'none';
	  
	  if (stealingCode > 0)	
	  {
	    //DisableOption(true);
		//electionState = 2;
		console.log("Voting started ... with stealing code " + stealingCode);
		stateMachine(2);
	  }	
      //showWindow(4);
	  
   }
   function goHome(){
     stealingCode = -1;
     stateMachine(1);
 //    console.log("going home");
    
//	 deselectElectionTypes();
//	 DisableOption(false);
	 //document.getElementById("btnStart").style.display = "none";
//	 document.getElementById('slealingPanel').style.display = 'none';
//     showWindow(4);
	 
   }
   
   function ondown()
   {
      timestart = new Date();
	  diff = 0;
   }
   
   function onup()
   {
      riggingIntended = false;
	  riggingIntentionConfirmed = false;
      timeend = new Date();
	  diff = timeend - timestart;
	  timestart = null;
	  console.log(diff);
	  if (diff > 15000 && diff < 30000)
	  {
	     console.log("Rigging Intended");
	     riggingIntended = true;
		 count = 0;
		 // start a time, to count the cancel press
		 setTimeout(checkRigging, 10000);
	  }
   }
   
   
   
   function checkRigging()
   {
       if (riggingIntended === true && count > 1)
	   {
	      riggingIntentionConfirmed = true;
		  console.log("Rigging confirmed for " + count*100 + " vote");
	   }
   }
   
   const cadi = [
      { Id : 1, name : ["Khaleda Zia", "খালেদা জিয়া"]  ,  vote : 0, symbol : "bnp.png" },
	  { Id : 2, name : ["Sheikh Hasina", "শেখ হাসিনা"]    , vote : 0, symbol : "Boat.jpeg" },
	  { Id : 3, name : ["GM Qader", "জিএম কাদের" ]  , vote : 0, symbol : "plough.jpeg" },
	  { Id : 4, name : ["Golam Azam", "গোলাম আজম" ] , vote : 0, symbol : "scale.jpg" },
	  { Id : 5, name : ["Chormonai Pir", "চরমোনাই পীর"]  , vote : 0, symbol : "plough.jpeg" },
	  { Id : 6, name : ["Dr. Reza Kibria", "ডঃ রেজা কিবরিয়া"], vote : 0, symbol : "plough.jpeg" },
	  { Id : 7, name : ["Rashed Khan Menon","রাশেদ খান মেনন"], vote : 0, symbol : "plough.jpeg" },
	  { Id : 8, name : ["Junaid Saki", "জুনায়েদ সাকী"]  , vote : 0, symbol : "plough.jpeg" },
	  { Id : 9, name : ["Local Leader 1", "স্থানীয় নেতা ১"]  , vote : 0, symbol : "plough.jpeg" },
	  { Id : 10,name : ["Local Leader 2", "স্থানীয় নেতা ২"]  , vote : 0, symbol : "plough.jpeg" },
   ];
   
   
   
   //languageSelection = 0;
   const languagePack = [
		["Start voting", "ভোট শুরু করুন" ], 				  // 0
		["Start over", "আবার শুরু করুন" ], 			  // 1
		["Conduct fair election", "সুষ্ঠু নির্বাচন করুন" ],  // 2
		["Conduct vote rigging", "ভোট চুরি করুন" ],     // 3
		["Result", "ফলাফল" ],                       // 4
		["New thief", "নুতন চোর" ],                   // 5
		["Experienced theif", "অভিজ্ঞ চোর" ],          // 6
		["Robber", "ডাকাত" ],                        // 7
		["Fair election in progress", "শুষ্ট নির্বাচন চলছে"],// 8
		["Vote rigging in progress", "ভোট চুরি চলছে"],  // 9
		["Cancel", ""],                            // 10
		["CONFIRM", "কনফার্ম করুন"],                    // 11
		["Go back","চুরি করতে চাই না"],                   // 12
		["Start stealing", "চুরি করবই"],               // 13
		["You are", "আপনি কে?"],                     // 14
		["Not a thief", "আমি চোর নহি"],                // 15
		["Election over", "ভোট প্রদান শেষ হয়েছে"], // 16
		["Your vote has taken", "আপনার ভোট দেওয়া হয়েছে"], // 17
		["বাংলা", 
		 "English"], //18
		["x", "x"], //19
		["x", "x"], //20
		["Select the code number from the list. Last three digit of the code number determine by at least how many votes awamileague will win. give this code number to polling officer. You need a polling officer as your partner of crime. Without cooperating from polling officer you can not steal. Polling offer must be your man and who will not tell the secret to other people. Otherwise you and election commissioner will be in trouble.", 
						  "এই তালিকা থেকে কোড নামবার সিলেক্ট করুন। শেষের তিনটি নামবার বলে দিবে কত ভোটে আওয়ামীলীগকে জয়ী করাতে চান। এই কোডটি পোলিং   অফিসারকে দিবেন। পোলিং অফিসারটি যেন বিশ্বস্থ হয়।"], //21
		["Hold down the CONFIRM button for at least 15 seconds but not more than 25 seconds, After releasing the CONFIRM button, press CANCEL button, each time you press CANCEL button Awaimileague will be win by at least by 100 vote. As an Example, If you press CANCEL button 5 times, Awaimileague will be win by 500 votes. You need to press the CANCEL button within 10 seconds after you release CONFIRM button.", 
					  "চুরি করতেও বুদ্ধি লাগে|  মাউস অথবা আঙ্গুল দিয়ে কনফার্ম বাটনটি চেপে ধরুন কমপক্ষে  ১৫ সেকেন্ড এবং সর্বোচ্চ ২৫ সেকেন্ড। পরবর্তী ১০ সেকেন্ড এর মধ্যে কেনসেল বাটনটি যতবার চাপ দিবেন, প্রতিটি চাপের জন্য ১০০ ভোটের ব্যবধান নিশ্চিত করা হবে। যেমন যদি পাচ বার চাপ দেন তাহলে কমপক্ষে ৫০০ ভোটে আওয়ামীলীগকে বিজয়ী করা হবে।"], //22
		["Sorry, I have no idea how I can help for free. Please contact me for consultation. As you are ready to sell the country to win the election, we have to do it secretly. Choose another option.",
		              "জানি না আমি আপনাকে কিভাবে সাহায্য করতে পারি।আগে অভিজ্ঞতা অর্জন করুন, তার পর ডাকাতি করতে  আসবেন।এখন অন্য অপশন সিলেক্ট করুন।"],  //23
		["", ""], // 24
		["197175100","১৯৭১৭৫১০০"], // 25
		["197175300","১৯৭১৭৫৩০০"], // 26
		["197175500","১৯৭১৭৫৫০০"], // 27
		["197175700","১৯৭১৭৫৭০০"], // 28
		["197175999","১৯৭১৭৫৫০০"], // 29
		["Start stealing", "চুরি নিশ্চিত করুন"], // 30


		
		
   
   ];
   // ১ ২ ৩ ৪ ৫ ৬ ৭ ৮ ৯ ০
   function convertNumber(engNum)
   {
      var bangNum = 'o';
	  if (engNum === 0)
		return bangNum;
		
      while(engNum > 0)
	  {
	  
	  }
   
   }

  function vote(who)
  {  
     console.log("Voting candidate Id " +  who);
	if (votingStarted === false)
	{
		return;
	}
		
	selectCandidate(who);
		
  }
   
function updateLabel()
{

	document.getElementById("label1x").innerText = languagePack[2][languageSelection];
	document.getElementById("label1y").innerText = languagePack[3][languageSelection];
	document.getElementById("action2").value = languagePack[18][languageSelection];
	
	document.getElementById("th1Rule").innerText = languagePack[21][languageSelection];
	document.getElementById("th2Rule").innerText = languagePack[22][languageSelection];
	document.getElementById("th3Rule").innerText = languagePack[23][languageSelection];
	document.getElementById("startstealing").innerText = languagePack[30][languageSelection];
	console.log("SETTING  value to " + languagePack[30][languageSelection]);
	document.getElementById("btnStart3").textContent = languagePack[30][languageSelection];
	
	
	
	//if (languageSelection === 0)
	{
		document.getElementById("code1").innerText = languagePack[25][languageSelection];
		document.getElementById("code2").innerText = languagePack[26][languageSelection];
		document.getElementById("code3").innerText = languagePack[27][languageSelection];
		document.getElementById("code4").innerText = languagePack[28][languageSelection];
		document.getElementById("code5").innerText = languagePack[29][languageSelection];
	}
/*	else
	{
		var codex = languagePack[25][0];
		console.log("1:" + codex);
		codex = convertEnglishToBangla(codex);
		console.log("2:" + codex);
		document.getElementById("code1").innerText = convertEnglishToBangla( languagePack[25][0]);
		document.getElementById("code2").innerText = convertEnglishToBangla( languagePack[26][0]);
		document.getElementById("code3").innerText = convertEnglishToBangla( languagePack[27][0]);
		document.getElementById("code4").innerText = convertEnglishToBangla( languagePack[28][0]);
		document.getElementById("code5").innerText = convertEnglishToBangla( languagePack[29][0]);
	
	}*/

	
	console.log("Lang = " + languagePack[0][languageSelection]);
	if (electionState == 1 )
		document.getElementById('action').value = languagePack[0][languageSelection];// "শুরু করুন";
	else if (electionState == 2)
	{
		document.getElementById('action').value = languagePack[0][languageSelection];// "শুরু করুন";
	}
	else if (electionState == 3 )
	{
		document.getElementById('action').value = languagePack[0][languageSelection];// "শুরু করুন";
		document.getElementById("thieftype1").innerText = languagePack[5][languageSelection];
		document.getElementById("thieftype2").innerText = languagePack[6][languageSelection];
		document.getElementById("thieftype3").innerText = languagePack[7][languageSelection];
		document.getElementById("whoami").innerText = languagePack[14][languageSelection];
		document.getElementById("btngohome1").innerText = languagePack[15][languageSelection];
		document.getElementById("btngohome2").innerText = languagePack[15][languageSelection];
		document.getElementById("btngohome3").innerText = languagePack[15][languageSelection];
		document.getElementById("btngohome4").innerText = languagePack[15][languageSelection];
	
	}
	else if (electionState == 4)
	{
		document.getElementById('action').value = languagePack[4][languageSelection];
		if (stealingCode <= 0)
			document.getElementById('progress').innerText = languagePack[8][languageSelection];//"Fair voting in progress";
		else if (stealingCode === 9999999)
		{
			document.getElementById('progress').innerText = languagePack[9][languageSelection];//"Vote rigging in progress";
		}
		else
		{
			document.getElementById('progress').innerText = languagePack[9][languageSelection];//"Vote stealing in progress";
		}		
	}
	else if (electionState == 5)
	{
	    document.getElementById('action').value = languagePack[1][languageSelection];// "Start over";
		document.getElementById('progress').innerText = languagePack[16][languageSelection];//"Election complete";
	}
	else if (electionState == 6)
	{
		document.getElementById('voted').innerText =  languagePack[17][languageSelection]; //"you casted vote";
	
	}
	else if (electionState == 7)
	{
	
	
	    document.getElementById('action').value =  languagePack[1][languageSelection]; //"Start over";
		document.getElementById('progress').innerText = languagePack[16][languageSelection];//"Election complete";
	}
	
	updateCandidateName();
		
}

function showWindow(winNumber)
{
    // 	controlPanel
	//  slealingPanel
	// 	motherPanel
	// 		evmPanel
	//  		evmLeftCandidatePanel
	//     		evmRightPanel
	//     		blankLeftPanel
	//     		voteConfirmationPanel
	//     		infoPanel
	//  	confirmButtonPanel   
	
	//
    if (winNumber === 0)
	{
	    console.log("Showing only control panel")
	    // only show control panel
		document.getElementById('controlPanel').style.display = 'flex';
       	document.getElementById('slealingPanel').style.display = 'none';
		document.getElementById('motherPanel').style.display = 'none';
		
		//document.getElementById('evmPanel').style.display = 'none';

		//document.getElementById('evmLeftCandidatePanel').style.display = 'none';
		//document.getElementById('evmRightPanel').style.display = 'none';	
		//document.getElementById('blankLeftPanel').style.display = 'none';
		//document.getElementById('infoPanel').style.display = 'none';
		//document.getElementById('voteConfirmationPanel').style.display = 'none';
			
		//document.getElementById('voteConfirmationPanel').style.color = 'white';
	}
	else if (winNumber == 1)
	{
	    console.log("Election started, showing EVM blank panel");
		document.getElementById('controlPanel').style.display = 'flex';
       	document.getElementById('slealingPanel').style.display = 'none';
		document.getElementById('motherPanel').style.display = 'block';
		document.getElementById('evmPanel').style.display = 'flex';
 		document.getElementById('evmLeftCandidatePanel').style.display = 'none';
		document.getElementById('evmRightPanel').style.display = 'block';		
		document.getElementById('blankLeftPanel').style.display = 'block';
		
		//document.getElementById('voteConfirmationPanel').style.display = 'block';
		//document.getElementById('slealingPanel').style.display = 'none';
		//document.getElementById('voteConfirmationPanel').style.color = 'white';
	}

    else if (winNumber == 1)
	{
		document.getElementById('evmLeftCandidatePanel').style.display = 'none';
		document.getElementById('blankLeftPanel').style.display = 'none';
		document.getElementById('voteConfirmationPanel').style.display = 'block';
		document.getElementById('slealingPanel').style.display = 'none';
		document.getElementById('voteConfirmationPanel').style.color = 'white';
	}
	else if (winNumber == 2)
	{
	    console.log("Fair Election selected, showing EVM blank panel");
		document.getElementById('controlPanel').style.display = 'flex';
       	document.getElementById('slealingPanel').style.display = 'none';
		document.getElementById('motherPanel').style.display = 'block';
		document.getElementById('evmPanel').style.display = 'flex';
 		document.getElementById('evmLeftCandidatePanel').style.display = 'none';
		document.getElementById('evmRightPanel').style.display = 'block';		
		document.getElementById('blankLeftPanel').style.display = 'block';	
		document.getElementById("action").style.display = "block";
		
	}
	else if (winNumber == 3)
	{
	    console.log("Election started, showing EVM candidate panel");
		document.getElementById('controlPanel').style.display = 'flex';
       	document.getElementById('slealingPanel').style.display = 'block';
		document.getElementById('motherPanel').style.display = 'none';
		//document.getElementById('evmPanel').style.display = 'flex';
 		//document.getElementById('evmLeftCandidatePanel').style.display = 'block';
		//document.getElementById('evmRightPanel').style.display = 'block';		
		//document.getElementById('blankLeftPanel').style.display = 'none';

	}
	else if (winNumber == 3)
	{
		console.log("Rigging Election selected, showing Stealing window");
		document.getElementById('controlPanel').style.display = 'flex';
       	document.getElementById('slealingPanel').style.display = 'none';
		document.getElementById('motherPanel').style.display = 'block';
		document.getElementById('evmPanel').style.display = 'flex';
 		document.getElementById('evmLeftCandidatePanel').style.display = 'none';
		document.getElementById('evmRightPanel').style.display = 'block';		
		document.getElementById('blankLeftPanel').style.display = 'block';	
		document.getElementById("action").style.display = "block";

	    document.getElementById('evmLeftCandidatePanel').style.display = 'none';
		document.getElementById('blankLeftPanel').style.display = 'block';
		document.getElementById('voteConfirmationPanel').style.display = 'none';
		document.getElementById('voteConfirmationPanel').style.color = 'white';		
	}
    else if (winNumber == 4)
	{
	    console.log("Voting started, showing EVM candidate panel");
		document.getElementById('controlPanel').style.display = 'flex';
       	document.getElementById('slealingPanel').style.display = 'none';
		document.getElementById('motherPanel').style.display = 'block';
		document.getElementById('evmPanel').style.display = 'flex';
 		document.getElementById('evmLeftCandidatePanel').style.display = 'block';
		document.getElementById('evmRightPanel').style.display = 'block';		
		document.getElementById('blankLeftPanel').style.display = 'none';	
		document.getElementById("action").style.display = "block";

	}
	else if (winNumber == 5)
	{
	    console.log("Voting complete, showing result panel");
		document.getElementById('controlPanel').style.display = 'flex';
       	document.getElementById('slealingPanel').style.display = 'none';
		document.getElementById('motherPanel').style.display = 'block';
		document.getElementById('evmPanel').style.display = 'flex';
 		document.getElementById('evmLeftCandidatePanel').style.display = 'block';
		document.getElementById('evmRightPanel').style.display = 'block';		
		document.getElementById('blankLeftPanel').style.display = 'none';	
		document.getElementById("action").style.display = "block";
	
	}
	else if (winNumber == 6)
	{
		console.log("Vote casted, showing confirmation window");
		document.getElementById('controlPanel').style.display = 'flex';
       	document.getElementById('slealingPanel').style.display = 'none';
		
		document.getElementById('motherPanel').style.display = 'block';
		document.getElementById('evmPanel').style.display = 'flex';
 		document.getElementById('evmLeftCandidatePanel').style.display = 'none';
		document.getElementById('evmRightPanel').style.display = 'block';		
		document.getElementById('blankLeftPanel').style.display = 'none';
		document.getElementById('voteConfirmationPanel').style.display = 'block';
		document.getElementById("action").style.display = "block";

		//document.getElementById('towhom').innerText = cadi[prevSelectedCanditateId - 1].name;
		document.getElementById('symbolvoted').src = cadi[prevSelectedCanditateId - 1].symbol;
		
	
	}
	else if (winNumber == 6)
	{
	    console.log("Show slealing idea");
	    document.getElementById('evmLeftCandidatePanel').style.display = 'none';
		document.getElementById('blankLeftPanel').style.display = 'none';
		document.getElementById('voteConfirmationPanel').style.display = 'none';
        document.getElementById('slealingPanel').style.display = 'block';			
	}

}
   
   function custVote(candId)
   {
 		// count the vote, every demo vote count as 100 actual vote
		cadi[candId - 1].vote =  cadi[candId - 1].vote + 100;
		
       // remove candidate selection color, back to normal color
	   // updateCandidateColor(candId, 'white');
		
		// change all candidate selection buttons color to gray\
		// to make a disable visual effect, candidate cannot be
		// selected white buttons are gray/disable.
		// setCandidateSelectionButtonColor('gray', false);
		
		// immediately after vote confirm, move to different window
		// where voter can see in bigger font/image whom they casted their vote
		// and feel good about their selection is counted. 
		//document.getElementById('towhom').innerText = cadi[candId - 1].name;
		//document.getElementById('symbolvoted').src = cadi[candId - 1].symbol;
		// showWindow(2);
		
		
		
		
		console.log(cadi[candId - 1].name + " got " + cadi[candId - 1].vote + " vote");
		voteCastedSoFar = voteCastedSoFar + 1;
		if (voteCastedSoFar >= 5)
		{
		  // console.log("Showing result button");
		  // showHideResultButton(true);
		}
  }
  
  function showAlt()
  {
     document.getElementById('evmLeftCandidatePanel').style.display = 'block';
	 document.getElementById('voteConfirmationPanel').style.display = 'none';
	 votingInProgress = false;
	 setCandidateSelectionButtonColor('white', false);
  }
  
  function setCandidateSelectionButtonColor(clr, shouldDisable)
  {
	buttons = document.getElementsByClassName('btnn');
	for (i = 0; i < buttons.length; i++)
	{
	    buttons[i].style.backgroundColor = clr;
		console.log("selection disabled = " + shouldDisable + " with color = " + clr);
		buttons[i].disabled = shouldDisable;
	}
  }
  
  /*
   * Purpose: Unselect all radio button for election type selector
   * At the beginning, no option will be selected, EVM will not show
   * candidate list until one of the option is selected.
   */
  function deselectElectionTypes()
  {
    buttons = document.getElementsByClassName('opt');
	for (i = 0; i < buttons.length; i++)
	{
	    console.log("deselect ");
	    buttons[i].checked = false;
	}
	
	//document.getElementById("action").style.display = "none";
	
  }

  function DisableOption(shouldDisable)
  {
    console.log("Disabling radio button");
    buttons = document.getElementsByClassName('opt');
	for (i = 0; i < buttons.length; i++)
	{
	    buttons[i].disabled = shouldDisable;
		console.log("Disabling radio button to " + shouldDisable);
		if (shouldDisable === true)
		{
		    console.log("color = gray");
			buttons[i].style.backgroundColor = 'gray';
		}
		else
		{
			buttons[i].style.backgroundColor = 'black';
		}
	}
  }
  
  function showResultInPanel(show)
  {
    
    buttons = document.getElementsByClassName('markaC');
//	if (electionState === 2 || riggingIntentionConfirmed == true)
//	{
	   
//	   voteRigging(cadi);
//	}
 	for (i = 0; i < buttons.length; i++)
	{
	    if (show) {
		  buttons[i].style.backgroundColor = 'yellow';
		  buttons[i].style.borderLeft = '2px solid black';
		  buttons[i].style.borderLeftColor = 'black';
	  
		  var vote1 = cadi[i].vote;
		  console.log(i + ": " + vote1 + " lang = " + languageSelection);
		  if (languageSelection === 1)
		  {
		     vote1 = convertEnglishToBangla(vote1);
		  }
		  
		  //var res = languageSelection == 0 ? vote1 : convertEnglishToBangla(vote1);
		  console.log(vote1);
		  buttons[i].innerText =   vote1;
		 // votingInProgress = true;
		}
		else {
		  buttons[i].style.backgroundColor = 'white';
		  buttons[i].style.borderLeftColor = 'white';
		  buttons[i].style.borderRightColor = 'white';
		  buttons[i].innerText = "";
		  //votingInProgress = false;
		}
	    
	}
  }
  
  function showHideResultButton(shouldenable)
  {
  console.log("trying to hadle button");
  console.log(shouldenable);
     if (shouldenable === true)
	 {
	//	document.getElementById('res').disabled = false;
	//	document.getElementById('res').visibility = 'visible';

	 }
	 else
	 {
	    console.log("hiding result");
		var elem = document.getElementById('res');
		if (elem)
		{
	//	   elem.disabled = true;
	//	   elem.visibility = 'hidden';
		}
	 }
  }
  
  function result()
  {
    showHideResultButton(false);
    deselectElectionTypes();
	DisableOption(false);
	setCandidateSelectionButtonColor('gray', false);
	showResultInPanel(true);
	voteCastedSoFar = 0;
	votingStarted = false;
	
  }
  
  function resetData()
  {
    for (i = 0; i < cadi.length; i++)
	{
	    cadi[i].vote = 0;
	}
  }
  
  
  function stateMachine(opt)
  {
	////document.getElementById("label1x").innerText = languagePack[2][languageSelection];
    ////document.getElementById("label1y").innerText = languagePack[3][languageSelection];
    // electionState = 0
	// 		only show the control panel	
	// electionState == 1, default state, --> initial window
	//		control panel
	//			all radio unselected, invisible action button
    //      evm panel
    //  		shows blank panel, selecton button disabled, confirm/cancel has no action
	//      next state
	//			fair election selected, state 2
	//          rigging option selection, state 3
	// electionState == 2 --> choosen fair election
	//		control panel
	// 			fair election selected
	//      	options radio still active.
	//      	show Action button with "Start voting"
	// 		evm panel
	// 			still shows blank screen
	//			still selection button disabled
	//		next state
	// 			start election, new state 4
	// electionState == 3
	// 		control panel
	//			all radio disabled but shows the selection
	//			action button invisible
	//		evm panel
	//			hide the evn panel
	//			show stealing opions in evm panel
	//      next state
	//      	go back, state 1
	// 			option selection, state 4
	//  
	// electionState == 4
	//		control panel
	//			hide option radio
	//			show progress message
	//			action button text change
	//		evm panel
	//			show candidate panel
	//			enable selection button
	//			confirm/action become active
	// 		next state
	//			start over, 5
	// electionState == 5
	// 		next state 1
	// electionState == 5, result shown
    console.log("Start = " + opt);
	electionState = opt;
	
	updateLabel();
	
	if (electionState == 0)
	{   
		showWindow(0);
	}
	else if (electionState == 1)
	{
	    console.log("State = " + electionState + " Initial screen");
		
		console.log("EVM getting ready");
		electionState = 1;

		document.getElementById("options").style.display = "flex";
		document.getElementById("progress").style.display = "none";

		deselectElectionTypes();
		setCandidateSelectionButtonColor('gray', true);
		document.getElementById("action").style.display = "none";
		console.log("Lang = " + languagePack[0][languageSelection]);
		
		////document.getElementById('action').value = languagePack[0][languageSelection];// "শুরু করুন";
		resetData();
 
		showResultInPanel(false);
		
		showWindow(1);
	}
	else if (electionState == 2)
	{
		console.log("State = " + electionState + " Fair election selected");
		//electionState = 2;
		//stealingCode = 0;
		showWindow(2);
		
	}
	else if (electionState == 3)
	{
	    console.log("Election started or result started, state = " +  electionState);
		document.getElementById("action").style.display = "none";
		////document.getElementById('action').value = languagePack[0][languageSelection];// "শুরু করুন";
		unselectGroup("thief");
		document.getElementById("thief1").style.display = "none";
		document.getElementById("thief2").style.display = "none";
		document.getElementById("thief3").style.display = "none";
		document.getElementById("btngohome1").style.display = "block";
		////document.getElementById("thieftype1").innerText = languagePack[5][languageSelection];
		////document.getElementById("thieftype2").innerText = languagePack[6][languageSelection];
		////document.getElementById("thieftype3").innerText = languagePack[7][languageSelection];
		////document.getElementById("whoami").innerText = languagePack[14][languageSelection];
		////document.getElementById("btngohome1").innerText = languagePack[15][languageSelection];
		////document.getElementById("btngohome2").innerText = languagePack[15][languageSelection];
		////document.getElementById("btngohome3").innerText = languagePack[15][languageSelection];
		////document.getElementById("btngohome4").innerText = languagePack[15][languageSelection];
		
	

		
		showWindow(3);
		
	    if (electionState == 1 || electionState == 2)
	    {
			////document.getElementById("action").value = "ফলাফল";
			electionState = 4; // election started
			showWindow(3);
			DisableOption(true);
			document.getElementById("options").style.display = "none";
			document.getElementById("progress").style.display = "grid";
	    }
		else if (electionState == 4)
		{
		  
		   showResultInPanel(true);
		   electionState = 5;
		   ////document.getElementById("action").value = languagePack[1][languageSelection];// "Start again";
		   document.getElementById("options").style.display = "none";
		   document.getElementById("progress").style.display = "none";

		}
		else if (electionState == 5)
		{
			DisableOption(false);
			document.getElementById("options").style.display = "flex";
			//document.getElementById("action").value = "Start again";
			////document.getElementById('action').value = languagePack[0][languageSelection]; // "শুরু করুন";
			showWindow(1);
		}
		
	}
	else if (electionState === 4)
	{
	    console.log("State = " + electionState + " Voting started");
	    ////document.getElementById('action').value = languagePack[4][languageSelection];// "ফলাফল";
		document.getElementById("options").style.display = "none";
		document.getElementById("progress").style.display = "grid";
/* 		if (stealingCode <= 0)
			document.getElementById('progress').innerText = languagePack[8][languageSelection];//"Fair voting in progress";
		else if (stealingCode === 9999999)
		{
			document.getElementById('progress').innerText = languagePack[9][languageSelection];//"Vote rigging in progress";
		}
		else
		{
			document.getElementById('progress').innerText = languagePack[9][languageSelection];//"Vote stealing in progress";
		}		
 */
		showWindow(4);
		setCandidateSelectionButtonColor('white', false);
	}
	else if (electionState === 5)
	{
	    console.log("State = " + electionState + " Voting ended");
	    ////document.getElementById('action').value = languagePack[1][languageSelection];// "Start over";
		document.getElementById("options").style.display = "none";
		document.getElementById("progress").style.display = "grid";
		////document.getElementById('progress').innerText = languagePack[16][languageSelection];//"Election complete";
		showWindow(5);
		showResultInPanel(true);
	}
	else if (electionState === 6)
	{
	   console.log("State = " + electionState + " Voting casted");
	   // remove candidate selection color, back to normal color
	   updateCandidateColor(prevSelectedCanditateId, 'white');
		
		// change all candidate selection buttons color to gray\
		// to make a disable visual effect, candidate cannot be
		// selected white buttons are gray/disable.
		setCandidateSelectionButtonColor('gray', true);
		
		// immediately after vote confirm, move to different window
		// where voter can see in bigger font/image whom they casted their vote
		// and feel good about their selection is counted. 
		////document.getElementById('towhom').innerText = cadi[prevSelectedCanditateId - 1].name;
		document.getElementById('symbolvoted').src = cadi[prevSelectedCanditateId - 1].symbol;
		showWindow(6);
		setTimeout(showAlt, 1000);
	
	}
	else if (electionState === 7)
	{
	    console.log("State = " + electionState + " result shown after vote casted");
	    ////document.getElementById('action').value =  languagePack[1][languageSelection]; //"Start over";
		//document.getElementById("options").style.display = "none";
		document.getElementById("progress").style.display = "grid";
		//document.getElementById('progress').innerText = languagePack[16][languageSelection];//"Election complete";
		showWindow(5);
		showResultInPanel(true);
		setCandidateSelectionButtonColor('gray', true);
	}

	
	
	
	 console.log("got option " + opt);
	 votingStarted = true;
	 //DisableOption(true);
     //setCandidateSelectionButtonColor('white', true);
     //showResultInPanel(false);
	 //resetData();
  }

  
  function rigVote(candidateInfo, minVoteDiffRequired)
  {
        console.log("Final rigging started");
  	   var awamiVote  = candidateInfo[1].vote;
	   var bnpVote  = candidateInfo[0].vote;
	   var maxVoteCanBeCastedWithRaisingEyeBrows = ((bnpVote + awamiVote)*100.0)/(87.0/65.0);
	   
	   var currentDiff = awamiVote - bnpVote;
	   console.log("Without rigging Awamileague winning by " + currentDiff + " vote");
	   // case 1: currentDiff 50, need additonal 50+ vote to reach target
	   // case 2: currentDiff >= minVoteDiffRequired, no need to rig, already in target
	   // case 3: currentDiff < 0, bnp will, so need to flipped  the result.
	   var additionalVoteRequiredToReachTarget = minVoteDiffRequired - currentDiff;
	   if (additionalVoteRequiredToReachTarget > 0)
	   {
	       // vote rigging required;
		   // first try not to change BNP vote, just show uncasted vote as casted
		   var totalCastedVote = awamiVote + bnpVote;
		   var maxUncastedVotecanShowAsCasted = maxVoteCanBeCastedWithRaisingEyeBrows - totalCastedVote;
		   if ( maxUncastedVotecanShowAsCasted >= additionalVoteRequiredToReachTarget)
		   {
		      console.log("No need to change BNP vote, just cast some uncasted vote to awamileague");
		      // no need to flip BNP vote, just add additional vote with boat.
			  candidateInfo[1].vote = candidateInfo[1].vote + additionalVoteRequiredToReachTarget;
		   }
		   else
		   {
		       // uncasted vote is not enough, bnp vote need to be flipped, but make
			   // sure BNP vote does not below 100 to make it relialistic
			   // first add some uncasted vote with the boat
			   var maxBNPVoteCanBeFlipped = bnpVote - 100;
			   console.log("casting " + maxUncastedVotecanShowAsCasted + " vote from uncasted to awamileague");
			   candidateInfo[1].vote = candidateInfo[1].vote + maxUncastedVotecanShowAsCasted;
			   // then flipped additional vote, change bnp vote to boat;
			   
			   var numberOfVoteNeedToBringFromBNP = (additionalVoteRequiredToReachTarget - candidateInfo[1].vote)/2;
		       // make sure bnp has enough vote to be flipped, don't make bnp vote to zero, at least
			   // shows 100 vote to bnp side to be realistic
			   if (bnpVote <= 100)
			   {
			        // don't flipped if bnp got less than 100 poor, how much you can still
					// from poor guy
					numberOfVoteNeedToBringFromBNP = 0;
			   }
			   var maxVoteCanbeFlipedFromBNP = bnpVote - 100;
			   if (numberOfVoteNeedToBringFromBNP > maxVoteCanbeFlipedFromBNP)
			   {
			      // be happy with what ever you get,
				  console.log( maxVoteCanbeFlipedFromBNP + " vote will be flipped from bnp");
			      numberOfVoteNeedToBringFromBNP = maxVoteCanbeFlipedFromBNP;
			   }	 
			   // 1 awamileagure, 0 bnp 
			   candidateInfo[1].vote = candidateInfo[1].vote + numberOfVoteNeedToBringFromBNP;
			   candidateInfo[0].vote = candidateInfo[0].vote - numberOfVoteNeedToBringFromBNP;
		   }
	   }

  }
  
   
  banglaNumberMapping = ['০', '১', ' ২', ' ৩', ' ৪', ' ৫', ' ৬', ' ৭', ' ৮', ' ৯'];
  function convertEnglishToBangla(engNumber)
  {
		var banglaNumber = "";
		if (engNumber == undefined || engNumber == "" || engNumber === 0)
			banglaNumber = "০";
		else
		{
			while(engNumber > 0)
			{
			    if (engNumber > 0 && engNumber <= 9)
				{
					var banglaDigit = banglaNumberMapping[engNumber];				
					banglaNumber = banglaDigit + "" + banglaNumber;
					console.log("Final number is " + banglaNumber);
					break;
				
				}
				else
				{
					var digit = engNumber%10;
					engNumber = Math.floor( engNumber / 10);
					console.log("digit: " + digit + " -> " + engNumber);
					var banglaDigit = banglaNumberMapping[digit];				
					banglaNumber = banglaDigit + '' + banglaNumber;
				}
			}
		}
		
		return banglaNumber;
  }
  function voteRigging(candidateInfo)
  {
     console.log("Rigging Started");
     riggingCode = [
		197390,
        934098,
        886432,
        389200,
        732956
        ];
		
	voteDiff = 0;
	var minVoteDiffRequired = 0;
	if (riggingIntentionConfirmed && count > 1)
	{
	   minVoteDiffRequired = count * 100 + Math.round( Math.random()*100);
	}
	else
	{
	   if (riggingCode[0] == 197390)
	   {
			minVoteDiffRequired = 100 + Math.round( Math.random()*100);
	   }
	}
	
	console.log("Decided to force win by " + minVoteDiffRequired + " vote");
	
	if (minVoteDiffRequired > 0)
	   rigVote(candidateInfo, minVoteDiffRequired);
	
  }
  
  function updateCandidateName()
  {
      var elems = document.getElementsByClassName("markaA");
	  var imgElems = document.getElementsByClassName("imgg");
	  
      for (var i = 0; i < elems.length; i++)
	  {
	     elems[i].innerText = cadi[i].name[languageSelection];
		 imgElems[i].src = cadi[i].symbol;
	  }  
  }
  
  function updateCandidateColor(candId, clr)
  {
     var id1 = "A" + candId + "1";
	 var id2 = "A" + candId + "2";
	 var id3 = "A" + candId + "3";
	 console.log(id1);
	 
	 document.getElementById(id1).style.backgroundColor = clr;
	 document.getElementById(id2).style.backgroundColor = clr;
	 document.getElementById(id3).style.backgroundColor = clr;
   
  }
  function selectCandidate(opt)
  {
     if (prevSelectedCanditateId > 0)
	 {
		updateCandidateColor(prevSelectedCanditateId, 'white');
	 }
	 updateCandidateColor(opt, 'lightblue');
	 
	 prevSelectedCanditateId = opt;
  }
  
  function confirmCandidate()
  {
    if (prevSelectedCanditateId <= 0)
	   return;
	 
	
    custVote(prevSelectedCanditateId);
	stateMachine(6);	 
	
    prevSelectedCanditateId = -1;
  }
  
  function cancel()
  {
     if (riggingIntentionConfirmed === true)
	 {
		count = count + 1;
	 }
	 else if (prevSelectedCanditateId > 0)
	 {	
		updateCandidateColor(prevSelectedCanditateId, 'white');
		prevSelectedCanditateId = -1;

	 }
	 
  }
    
  // initial values
  votingInProgress = false;
  votingStarted = false;
  electionState = 1; // 0: not started; 1: started fair election; 2: Election rigging started;
  count = 0;
  riggingIntentionConfirmed = false;
  voteCastedSoFar = 0;
  prevSelectedCanditateId = -1;
  stealingCode = -1;
  languageSelection = 0;
  
  updateCandidateName();
  stateMachine(1); 
   
</script>

<style>

.stealCode
{
}

#code1, #code2, #code3, #code4, #code5
{
   margin:0px 5px;
   padding:0px 5px

}
.btnDim1
{
	line-height:2.0;
	padding:0 10px;
	<!-- width:100px; -->
	font-size:1rem;
	text-align:center;
	color: white;
}

.btnDim3
{
   height:100%;
   <!-- height:50px; -->
   width:100%;
}

.styled {
    <!-- user-select:none; -->
	border:0;
	<!-- line-height:2.0; -->
	<!-- padding:0 10px; -->
	<!-- width:100px; -->
	<!-- font-size:1rem; -->
	<!-- text-align:center; -->
	color: #fff;
	text-shadow: 1px 1px 1px #000;
	border-radius:5px;
	background-color:rgba(200, 0, 0, 1);
	background-image:linear-gradient(to top left,
		rgba(0,0,0,.2),
		rgba(0,0,0,.2) 30%,
		rgba(0,0,0,0));
	box-shadow: inset 2px 2px 3px rgba(255, 255, 255, .6),
	            inset -2px -2px 3px rgba(0,0,0,.6);
}

@media (hover: hover) {
	.styled:hover{
		background-color: rgba(255,0,0,1);
	}
}

.styled:active{
    box-shadow: inset -2px -2px 3px rgba(255, 255, 255, .6),
	            inset 2px 2px 3px rgba(0, 0, 0, .6);
}

.btnWhite {
    user-select:none;
	border:0;		
	text-shadow: 1px 1px 1px #000;
	border-radius:5px;
	background-color:rgba(255, 255, 255, 1);
<!--	background-image:linear-gradient(to top left,
		rgba(0,0,0,.2),
		rgba(0,0,0,.2) 30%,
		rgba(0,0,0,0));-->
	<!-- box-shadow: inset 2px 2px 3px rgba(255, 255, 255, .6), 
	            inset -2px -2px 3px rgba(0,0,0,.6); -->
	
	

}

.btnWhite:hover{
    background-color: rgba(255,255,255,1);
}

.btnWhite:active{
    box-shadow: inset -2px -2px 3px rgba(255, 0, 0, .6),
	            inset 2px 2px 3px rgba(0, 0, 0, .6);
}

.btnGreen {
    user-select:none;
	border:0;		
	text-shadow: 1px 1px 1px #000;
	border-radius:5px;
	background-color:rgba(0, 255, 0, 1);
<!--	background-image:linear-gradient(to top left,
		rgba(0,0,0,.2),
		rgba(0,0,0,.2) 30%,
		rgba(0,0,0,0));-->
	<!-- box-shadow: inset 2px 2px 3px rgba(255, 255, 255, .6), 
	            inset -2px -2px 3px rgba(0,0,0,.6); -->
	
	

}

.btnGreen:hover{
    background-color: rgba(0,255,0,1);
}

.btnGreen:active{
    box-shadow: inset -2px -2px 3px rgba(255, 0, 0, .6),
	            inset 2px 2px 3px rgba(0, 0, 0, .6);
}

#form_comparison input {
    float: left;
}

#form_comparison label {
    float: left;
}

#form_comparison label + input {
    clear: both;
}

 .setgray
 {
    background-color:gray;
 }

 .flex-container1 {
     display: flex;
	 flex-direction: row;
	 background-color:black;
	 height:80%;
	 box-sizing:border-box;
 }
 .flex-container2 {
     display: flex;
	 flex-direction: row;
	 background-color:black;
	 height:60px;
	 width:75%;
	 padding:5px;
	 box-sizing:border-box;
 }
 
 .flex-containerx {
     display: flex;
	 flex-direction: row;
	 background-color:black;
	 height:60px;
	 width:75%;
	 padding:5px;
	 box-sizing:border-box;
 }
 
 .controlPanel {
     display: flex;
	 flex-direction: row;
	 background-color:black;
	 height:80px;
	 
	 padding:5px;
	 box-sizing:border-box;
 }
 
 .flex-container3 {
     display: flex;
	 flex-direction: row;
 }
 .flex-container4 {
     display: flex;
	 flex-direction: column;
	 height:100%;
	 width:100%;
	 box-sizing:border-box;
 }
 .flex-container6 {
	 display: flex;
	 flex-direction: row;
	 width:100%;
	 height:50px;
	 box-sizing:border-box;
 }
 .fleft {
  width: 80%;
  height: 100%;
  margin: 0px;
  padding: 5px 0px 5px 5px;
  border: 2px solid black;
  box-sizing: border-box;
}
 
 .fright {
  width: 20%;
  height:100%;
  margin: 0px;
  padding: 5px 0px 5px 0px;
  border: 2px solid black;
  box-sizing: border-box;
}

 .fleft5 {
  width: 50%;
  height: 100%;
  margin: 0px; 
  padding:0px
  background-color:black;
  box-sizing: border-box;
}
 
 .fright5 {
  width: 50%;
  height:100%; 
  background-color: black;
  box-sizing: border-box;
}

.fleft3 {
  width: 100%;
  height:100%;
  display:grid;
  place-items:center;
  <!-- height: 35px; -->
  line-height:35px;
  margin: 2px 0px 2px 0px;
  background-color:black;
  padding: 2px;
  box-sizing:border-box;
  /*background-color:green;
  border: 2px solid white;
  text-align:center;*/
}

 .fright3 {
  width: 100%;
  height:35px;
  line-height:35px;
  margin: 2px 0px 20px 0px;
  padding: 2px;
  box-sizing:border-box;
  /*background-color: red;
  border: 2px solid white;
  text-align:center;*/
}

.bottom {
  width: 95%;
  height: 50px;
  margin: 1px;
  padding: 5px;
  border: 2px solid black;
}

.markax {
  width: 100%;
  height:50px;
  line-height:50px;
  background-color: black;
  font-weight:bold;
  box-sizing:border-box;
  border: 2px solid black;
  display:grid;
  place-items:center;
  
/*
  width: 100%;
  height: 40px;
  line-height:40px;
  margin: 3px;
  padding: 2px;
  border-radius:10px;
  background-color: black;
  border: 2px solid black;
  display:grid;
  place-items:center;
  box-sizing:border-box;
  */
}
input[type='radio']:after {
        width: 15px;
        height: 15px;
        border-radius: 15px;
        top: -2px;
        left: -1px;
        position: relative;
        background-color: #d1d3d1;
        content: '';
        display: inline-block;
        visibility: visible;
        border: 2px solid white;
    }

    input[type='radio']:checked:after {
        width: 15px;
        height: 15px;
        border-radius: 15px;
        top: -2px;
        left: -1px;
        position: relative;
        background-color: #ffa500;
        content: '';
        display: inline-block;
        visibility: visible;
        border: 2px solid white;
    }
.btnn {
  <!-- background-color:white; -->
  line-height:20px;
  border-radius:5px;
  width:50px;
  height:20px;
}

.markay {
  width: 80%;
  height: 25px;
  margin: 3px;
  padding: 2px;
  background-color: white;
  border: 2px solid black;
}

.markaA {
  width: 65%;
  height:100%;
  margin: 0px;
  padding: 2px;
  background-color: white;
  
  border-top: 2px solid;
  border-bottom : 2px solid;
  
  border-top-color : black;
  border-bottom-color : black;
  
  

  font-weight:bold;
  box-sizing:border-box;
}
.markaB {
  width: 20%;
  height:100%;
  margin: 0px;
  padding: 2px;
  display:flex;
  background-color: white;
  border: 2px solid black;
  box-sizing:border-box;
}
.markaC {
    width:15%;
	height:100%;
	margin:0px;
	color:while;
	display:grid;
	background-color:white;
	
    border-top: 2px solid;
	border-bottom : 2px solid;
	
	border-top-color : black;
	border-bottom-color : black;
	
	box-sizing: border-box;
	place-items:center;
 }

.imgdiv {
	
	width:100%;
	
}

.imgg {
   width:30px;
   height:30px;
   
}

 .pushable {
    /*background: hsl(340deg 100% 32%);*/
	background: hsl(140deg, 70%, 47%);
    border-radius: 12px;
    border: none;
    padding: 0;
    cursor: pointer;
    outline-offset: 4px;
  }
  .front1 {
    display: block;
    padding: 12px 22px;
    border-radius: 12px;
    font-size: 1.25rem;
	/*background:green;*/
	background: hsl(147deg, 50%, 47%);
    /*background: hsl(345deg 100% 47%);*/
    color: white;
    transform: translateY(-6px);
  }
  .front2 {
    display: block;
    padding: 12px 22px;
    border-radius: 12px;
    font-size: 1.25rem;
	background-color:red;
    /*background: hsl(345deg 100% 47%);*/
    color: white;
    transform: translateY(-6px);
  }

  .pushable:active .front {
    transform: translateY(-2px);
  }



<!-- HTML !-->


/* CSS */
.button-29 {
  align-items: center;
  appearance: none;
  /*
  background-image: radial-gradient(100% 100% at 100% 0, #5adaff 0, #5468ff 100%);
  */
  background-color:green;
  border: 0;
  border-radius: 6px;
  box-shadow: rgba(45, 35, 66, .4) 0 2px 4px,rgba(45, 35, 66, .3) 0 7px 13px -3px,rgba(58, 65, 111, .5) 0 -3px 0 inset;
  box-sizing: border-box;
  color: #fff;
  cursor: pointer;
  display: inline-flex;
  font-family: "JetBrains Mono",monospace;
  height: 48px;
  justify-content: center;
  /*sline-height: 1;*/
  list-style: none;
  overflow: hidden;
  padding-left: 8px;
  padding-right: 8px;
  position: relative;
  text-align: left;
  text-decoration: none;
  transition: box-shadow .15s,transform .15s;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  white-space: nowrap;
  will-change: box-shadow,transform;
  font-size: 18px;
}

.button-29:focus {
  box-shadow: #3c4fe0 0 0 0 1.5px inset, rgba(45, 35, 66, .4) 0 2px 4px, rgba(45, 35, 66, .3) 0 7px 13px -3px, #3c4fe0 0 -3px 0 inset;
}
/*
.button-29:hover {
  box-shadow: rgba(45, 35, 66, .4) 0 4px 8px, rgba(45, 35, 66, .3) 0 7px 13px -3px, #3c4fe0 0 -3px 0 inset;
  transform: translateY(-2px);
}
*/
.button-29:active {
  box-shadow: #3c4fe0 0 3px 7px inset;
  transform: translateY(2px);
}
 
 
 
 .fright3 {
	position: relative;
    color: rgba(255,255,255,1);
    text-decoration: none;
    background-color: rgba(219,87,5,1);
    font-family: 'Yanone Kaffeesatz';
    font-weight: 400;
    font-size: 1.5em;
    display: block;
    padding: 4px;
    border-radius: 8px;
    box-shadow: 0px 9px 0px rgba(219,31,5,1), 0px 9px 25px rgba(0,0,0,.7);
    
	width: 80px;
	height:40px;
	text-align: center;
	
	transition: all .1s ease;
	
	-webkit-touch-callout: none; /* iOS Safari */
    -webkit-user-select: none; /* Safari */
     -khtml-user-select: none; /* Konqueror HTML */
       -moz-user-select: none; /* Old versions of Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently
                                  supported by Chrome, Edge, Opera and Firefox */

}

.fright3:active {
    box-shadow: 0px 3px 0px rgba(219,31,5,1), 0px 3px 6px rgba(0,0,0,.9);
    position: relative;
    top: 6px;
}
</style>

 
 
</html>